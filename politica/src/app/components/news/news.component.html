<app-menu></app-menu>
<div class="debate-input">
</div>
<div class="content p-component">
    <div class="profile">
        <div class="stick-left" *ngIf="isLoggedIn">
            <img class="p-avatar p-avatar-lg pdp" *ngIf="!(profil.profilPicture === undefined)" _ngcontent-qqs-c76="" [src]="profil.profilPicture"/>
            <img class="p-avatar p-avatar-lg pdp" *ngIf="profil.profilPicture === undefined" _ngcontent-qqs-c76="" src="../../../assets/PDP.webp"/>
            <div class="profil-information">
                <div class="p-card-title"> {{ profil.username }} </div>
                <div class="p-card-subtitle"></div>
                <div class="p-card-content">
                    {{ profil.politicalParti }}
                </div>
                <div class="p-card-content">
                    {{ profil.genre }}
                </div>
                <div *ngIf="profil.journalist" class="p-card-footer">
                    <p-tag styleClass="mr-2" severity="success" value="Journaliste" [rounded]="true"></p-tag>
                </div>
            </div>
        </div>
    </div>
    <div class="debate-feed">
        <div class="p-card news-post" *ngIf="profil.journalist">
            <span class="p-float-label">
                <input id="float-input" type="text" pInputText [(ngModel)]="newPost.title" maxlength="255"> 
                <label for="float-input">Titre</label>
            </span>
            <span class="p-float-label">
                <textarea id="float-input" rows="5" cols="30" [(ngModel)]="newPost.content" maxlength="255" pInputTextarea></textarea>
                <label for="float-input">Contenu</label>
            </span>
            <span class="p-float-label">
                <input id="float-input" type="text" pInputText [(ngModel)]="newPost.source" maxlength="255"> 
                <label for="float-input">Source</label>
            </span>
            <button pButton pRipple (click)="post()" type="button" label="Publier" class="p-button p-button-politica p-button-sm"></button>
        </div>
        <div class="p-card card-display" *ngFor="let news of newsList" (click)="showDialog(news._id)">
            <img class="p-avatar p-avatar-lg news-image" _ngcontent-qqs-c76="" [src]="news.image" />
            <div class="card-content" style="--lh: 1.2rem; line-height: var(--lh);">
                <div class="p-card-title" style="word-wrap: break-word; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;"> {{ news.title }} </div>
                <div class="p-card-subtitle"></div>
                <div class="p-card-content news-content-space truncate-overflow"> {{ news.content }} </div>
                <div class="p-card-footer news-footer">
                    <span class="font-footer" style="font-size: smaller;"> {{ news.source }} - {{ news.journalist.username }} - {{ formatDate(news.dateTime) }} </span>
                </div>
            </div>
        </div>
    </div>
    <div class="news">
    </div>
</div>

<p-dialog [header]="showNews.title" [modal]="true" [(visible)]="display" [dismissableMask]="true">
    <p>
        {{ showNews.content }}
    </p>
    <ng-template pTemplate="footer">
        {{ showNews.source }} - {{ showNews.journalist.username }} - {{ showNews.dateTime }}
    </ng-template>
</p-dialog>